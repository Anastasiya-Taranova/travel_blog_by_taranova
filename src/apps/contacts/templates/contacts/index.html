{% extends "basic1.html" %}
{% load static %}
{% block header %}Как со мной связаться?{% endblock %}
{% block main %}

<h1>Маршруты:</h1>
{% if shops %}
<ul>
    {% for shop in shops %}
    <li>
        {{ shop.name }} : {{shop.distance}}
        {{shop.location}}

    </li>
    {% endfor %}
</ul>
    <p>{{ point.x }}
    {{ point.y }}</p>
{% endif %}
<script src="https://maps.api.2gis.ru/2.0/loader.js"></script>
<div id="map" style="width: 100%; height: 400px;"></div>
<script>
    DG.then(function () {
        var map,
            marker,
            group;

        map = DG.map('map', {
            center: [54.98, 82.89],
            zoom: 13
        });
{% for shop in shops %}
        marker = DG.marker([ {{shop.point.x}}, {{shop.point.y}} ]).addTo(map);
{% endfor %}
        group = DG.featureGroup([marker]);
        group.addTo(map);
        group.on('click', function (e) {
            map.setView([e.latlng.lat, e.latlng.lng]);
        });
    });
</script>


{% endblock %}
